import tkinter as tk
from tkinter import simpledialog, messagebox

#  Funciones que hacen que los botones y la lista funcionen 
def agregar():
    # Tomamos el texto que escribió el usuario
    texto = entrada.get().strip()
    if texto:
        # Si hay texto, lo agregamos a la lista
        lista.insert(tk.END, texto)
        # Limpiamos el campo de texto para que el usuario pueda escribir de nuevo
        entrada.delete(0, tk.END)
        # Actualizamos el contador que muestra cuántos elementos hay
        actualizar_contador()
    else:
        # Si el usuario no escribió nada, mostramos una advertencia
        messagebox.showwarning("Campo vacío", "Ingresa algo antes de agregar.")

def limpiar():
    # Verificamos si el usuario seleccionó algún elemento de la lista
    seleccion = lista.curselection()
    if seleccion:
        # Si hay selección, borramos esos elementos
        for i in reversed(seleccion):
            lista.delete(i)
        # Actualizamos el contador después de borrar
        actualizar_contador()
    else:
        # Si no hay selección, solo limpiamos el campo de texto
        entrada.delete(0, tk.END)

def actualizar_contador():
    # Mostramos en la ventana cuántos elementos hay en la lista
    contador_var.set(f"Elementos en la lista: {lista.size()}")

def editar(event):
    # Esta función permite editar un elemento con doble clic
    seleccion = lista.curselection()
    if seleccion:
        index = seleccion[0]  # Obtenemos la posición del elemento
        valor_actual = lista.get(index)  # Obtenemos el texto actual
        # Abrimos una ventana donde el usuario puede modificar el texto
        nuevo_valor = simpledialog.askstring("Editar elemento", "Modifica el texto:", initialvalue=valor_actual)
        if nuevo_valor:
            lista.delete(index)       # Borramos el texto viejo
            lista.insert(index, nuevo_valor)  # Insertamos el texto nuevo
            actualizar_contador()     # Actualizamos el contador

# Creamos la ventana principal 
ventana = tk.Tk()
ventana.title("Mi Aplicación GUI Mejorada")  # Título de la ventana
ventana.geometry("450x350")  # Tamaño de la ventana

#  Componentes de la interfaz 
tk.Label(ventana, text="Ingrese texto:").pack(pady=5)  # Etiqueta que indica qué hacer

entrada = tk.Entry(ventana, width=50)  # Campo donde escribimos texto
entrada.pack(pady=5)
entrada.focus_set()  # El cursor empieza en este campo automáticamente

tk.Button(ventana, text="Agregar", command=agregar).pack(pady=5)  # Botón para agregar
tk.Button(ventana, text="Limpiar", command=limpiar).pack(pady=5)  # Botón para limpiar

lista = tk.Listbox(ventana, width=60, height=10)  # Lista donde se muestran los elementos
lista.pack(pady=10)
lista.bind("<Double-1>", editar)  # Doble clic para editar un elemento

contador_var = tk.StringVar()  # Variable que guarda el texto del contador
contador_var.set("Elementos en la lista: 0")  # Comenzamos con 0 elementos
tk.Label(ventana, textvariable=contador_var).pack()  # Mostramos el contador en la ventana

# Ejecutamos la ventana 
ventana.mainloop()  # Esto mantiene la ventana abierta hasta que el usuario la cierre
